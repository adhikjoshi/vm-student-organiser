<?xml version="1.0" encoding="utf-8"?>

<!--
File:			organiser.mxml
Date:			07.01.2011
Author:			Joshua Lau
Description:	Main file which controls layout of the application and includes script files.
-->

<mx:WindowedApplication xmlns:mx="http://www.adobe.com/2006/mxml" layout="absolute" windowComplete="readAll();" closing="writeAll();" >

<mx:Script>
	<![CDATA[
		include "sharedLibrary.as"
		include "handleSubjects.as"
		include "handleNotes.as"
		include "control.as"
		include "clock.as"
		include "prefs.as"
	]]>
</mx:Script>

<mx:Style source="../fonts/embeddedFonts.css" />

<mx:Canvas x="50" y="25">
	<mx:Image id="topBarImg" source="@Embed(source='../assets/topbarcropped.png')" />
	<mx:Label id="headerLabel" fontFamily="MyriadPro" fontSize="20" x="10" y="10" color="white" />
	<mx:Label id="userInfoLabel" fontFamily="MyriadPro" fontSize="16" x="10" y="60" color="white" />
</mx:Canvas>

<mx:VBox id="contentArea"
	x="300" y="150"
	width="610" height="440"
	horizontalScrollPolicy="off"
	verticalScrollPolicy="off">

	<mx:TabNavigator id="contentStack"
		x="300" y="150"
		width="610" height="300"
		selectedIndex="0"
		creationPolicy="all">
		
		<mx:Canvas label="Diary">
			<mx:DateField id="dateSelector" x="10" width="100" editable="true" formatString="DD/MM/YYYY" change="useDate(event);"/>
			<mx:DataGrid id="diaryEntries"
				x="10" y="25"
				dataProvider="{curDayTasks.period}" 
				editable="true"
				rowCount="8"
				itemEditEnd="writeDayTasks();">
					
				<mx:columns>
					<mx:DataGridColumn dataField="subject" editable="false" headerText="Subject" width="100" />
					<mx:DataGridColumn dataField="tasks" editable="true" headerText="Tasks" width="475" />
				</mx:columns>
			</mx:DataGrid>
		</mx:Canvas>
	
		<mx:Canvas label="Notes">
			<mx:Label x="10" width="100%" color="black" text="Type random notes, thoughts or anything else in this autosaving box." />
			<mx:TextArea id="notesArea"
				x="10" y="20"
				width="500" height="200"
				verticalScrollPolicy="auto"
				text="" />
		</mx:Canvas>
		
		<mx:Canvas label="Preferences">
			<mx:Form id="userDetails" borderStyle="solid" x="20" y="10">
				<mx:FormItem label="Name">
					<mx:TextInput id="userNameField" />
				</mx:FormItem>

				<mx:FormItem label="Class">
					<mx:ComboBox id="classField" dataProvider="{classList}" />
				</mx:FormItem>
				
				<mx:FormItem>
					<mx:Button id="saveNamePrefsButton" label="Save" click="saveUserDetails();" />
				</mx:FormItem>
			</mx:Form>
		</mx:Canvas>
		
	</mx:TabNavigator>
</mx:VBox>
	
</mx:WindowedApplication>
